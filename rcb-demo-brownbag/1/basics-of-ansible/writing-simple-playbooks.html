<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Writing simple playbooks :: Introduction to  Ansible</title>
    <link rel="prev" href="installation-and-configuration.html">
    <link rel="next" href="managing-hosts-with-ansible.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">Introduction to  Ansible</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rcb-demo-brownbag" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Introduction to  Ansible</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../LABENV/index.html">Lab Environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="basics-of-ansible.html">Basics of Ansible</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="understanding-of-ansible-architecture.html">Understanding of Ansible architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="installation-and-configuration.html">Installation and configuration</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="writing-simple-playbooks.html">Writing simple playbooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="managing-hosts-with-ansible.html">Managing hosts with Ansible</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="using-ansible-modules.html">Using Ansible modules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="handling-variables-and-templates.html">Handling variables and templates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="control-flow-with-roles.html">Control flow with roles</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../hands-on-lab/hands-on-lab.html">Hands-on Lab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/setting-up-a-basic-ansible-environment.html">Setting up a basic Ansible environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/creating-running-and-debugging-playbooks.html">Creating, running, and debugging playbooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/applying-concepts-through-practical-exercises.html">Applying concepts through practical exercises</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendix/appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Introduction to  Ansible</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Introduction to  Ansible</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Introduction to  Ansible</a></li>
    <li><a href="basics-of-ansible.html">Basics of Ansible</a></li>
    <li><a href="writing-simple-playbooks.html">Writing simple playbooks</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Writing simple playbooks</h1>
<div class="ulist">
<ul>
<li>
<p><strong>Writing Simple Playbooks</strong></p>
<div class="literalblock">
<div class="content">
<pre>Ansible playbooks are files written in YAML format that contain a series of tasks organized into plays. Each play specifies the target hosts and the actions to perform on them. Writing simple playbooks is an essential skill for automating tasks with Ansible. Here's how you can get started:</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Understanding Playbook Structure</strong></p>
<div class="literalblock">
<div class="content">
<pre>A basic Ansible playbook looks like this:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>```yaml
---
- hosts: webservers
  become: yes
  tasks:
    - name: Install Apache
      apt:
        name: apache2
        state: present
```</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Let's break down the structure:</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><code>---</code>: This marks the start of the playbook.</p>
</li>
<li>
<p><code>hosts:</code>: Specifies the target hosts for the play. In this case, it targets all hosts with the role 'webservers'.</p>
</li>
<li>
<p><code>become</code>: This keyword is used to escalate privileges (become another user, often the root user) when executing tasks. Using <code>yes</code> enables privilege escalation.</p>
</li>
<li>
<p><code>tasks</code>: Contains a list of tasks to perform on the target hosts.</p>
<div class="literalblock">
<div class="content">
<pre>The task under `tasks` installs Apache on the target web servers using the APT package manager.</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Key Playbook Components</strong></p>
<div class="literalblock">
<div class="content">
<pre>Here are some essential components you'll often encounter in Ansible playbooks:</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><strong>Host Patterns</strong>: Define which hosts a play applies to. Common patterns include single hostnames, groups (defined in an inventory file), or dynamic host lists based on external facts or scripts.</p>
</li>
<li>
<p><strong>Tasks</strong>: Individual actions to be performed on target hosts, using modules.</p>
</li>
<li>
<p><strong>Modules</strong>: Reusable, standalone programs that Ansible runs on the managed nodes. Ansible provides a wide range of built-in modules for various use cases (e.g., <code>apt</code>, <code>command</code>, <code>file</code>, <code>service</code>).</p>
</li>
<li>
<p><strong>Handlers</strong>: Specialized tasks triggered by changes reported by notify statements within tasks, ensuring orderly execution and reducing unnecessary task reruns.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Writing Your First Playbook</strong></p>
<div class="literalblock">
<div class="content">
<pre>To write a simple playbook that installs Apache on web servers:</pre>
</div>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Create a new file named <code>install_apache.yml</code>.</p>
</li>
<li>
<p>Add the following content to the file:</p>
<div class="literalblock">
<div class="content">
<pre>```yaml
---
- hosts: webservers
  become: yes
  tasks:
    - name: Install Apache
      apt:
        name: apache2
        state: present
```</pre>
</div>
</div>
</li>
<li>
<p>Save the file and run the playbook with <code>ansible-playbook install_apache.yml</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>Testing and Debugging</strong></p>
<div class="literalblock">
<div class="content">
<pre>After running your playbook, monitor the output for success or failure messages. Use `-vvv` (verbose) flag to see detailed logs:</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>```bash
ansible-playbook -vvv install_apache.yml
```</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>If errors occur, carefully examine the error messages, as they often point to issues with host connectivity, module usage, or incorrect syntax.</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>By mastering writing simple playbooks, you&#8217;ll be able to automate routine tasks and efficiently manage your infrastructure with Ansible. As you progress, explore more complex playbook structures, advanced modules, and roles for even greater control and reusability.</p>
</div>
<nav class="pagination">
  <span class="prev"><a href="installation-and-configuration.html">Installation and configuration</a></span>
  <span class="next"><a href="managing-hosts-with-ansible.html">Managing hosts with Ansible</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
