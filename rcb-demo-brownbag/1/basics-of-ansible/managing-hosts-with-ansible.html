<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Managing hosts with Ansible :: Introduction to  Ansible</title>
    <link rel="prev" href="writing-simple-playbooks.html">
    <link rel="next" href="using-ansible-modules.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">Introduction to  Ansible</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rcb-demo-brownbag" data-version="1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Introduction to  Ansible</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../LABENV/index.html">Lab Environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="basics-of-ansible.html">Basics of Ansible</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="understanding-of-ansible-architecture.html">Understanding of Ansible architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="installation-and-configuration.html">Installation and configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="writing-simple-playbooks.html">Writing simple playbooks</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="managing-hosts-with-ansible.html">Managing hosts with Ansible</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="using-ansible-modules.html">Using Ansible modules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="handling-variables-and-templates.html">Handling variables and templates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="control-flow-with-roles.html">Control flow with roles</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../hands-on-lab/hands-on-lab.html">Hands-on Lab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/setting-up-a-basic-ansible-environment.html">Setting up a basic Ansible environment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/creating-running-and-debugging-playbooks.html">Creating, running, and debugging playbooks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/applying-concepts-through-practical-exercises.html">Applying concepts through practical exercises</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendix/appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Introduction to  Ansible</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Introduction to  Ansible</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Introduction to  Ansible</a></li>
    <li><a href="basics-of-ansible.html">Basics of Ansible</a></li>
    <li><a href="managing-hosts-with-ansible.html">Managing hosts with Ansible</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Managing hosts with Ansible</h1>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">== Managing Hosts with Ansible

Ansible excels at managing hosts, allowing administrators to automate configuration management, deployment, and orchestration tasks across their infrastructure. This section will cover how to manage hosts using Ansible, focusing on inventory, connection details, and playbook execution.

=== Understanding Inventory

The Ansible inventory is a file that stores host information, grouped by category. It tells Ansible where to operate and provides the necessary connection details for reaching target hosts. The default inventory file is typically named `inventory` or `hosts`, located in `/etc/ansible` on the Ansible control node.

Ansible supports multiple inventory formats:

* Inline: Defining host variables directly within the playbook.
* Ini: A simple format for storing host groups and variable values.
* YAML: A more powerful and flexible format for defining complex inventories.

Here's an example of a basic Ansible inventory file in INI format:

[webservers]
web01.example.com ansible_host=192.168.1.10
web02.example.com ansible_host=192.168.1.11

[databases]
db01.example.com ansible_host=192.168.1.12

=== Connecting to Hosts

Before communicating with managed hosts, Ansible needs connection details such as the user account and authentication method. These are defined in the `[all:vars]` section of the inventory file or within groups.

For example, to use SSH for connecting to Linux-based hosts:

[all:vars]
ansible_user=your_username
ansible_ssh_private_key_file=/path/to/your/ssh_key

=== Writing Playbooks for Host Management

Playbooks are Ansible's configuration, deployment, and orchestration language. They describe a policy you want your remote systems to enforce. To manage hosts, write plays that target specific host groups or individual hosts.

Hereâ€™s an example playbook to ensure the `nginx` package is installed on web servers:

---
- name: Install nginx on webservers
  hosts: webservers
  become: yes

  tasks:
  - name: Ensure nginx is installed
    package:
      name: nginx
      state: present

In this playbook:

* `- name: Install nginx on webservers` defines the play's title.
* `hosts: webservers` targets the 'webservers' group from the inventory file.
* `become: yes` escalates privileges to root for task execution.
* The `tasks` section contains a single task to manage packages using the `package` module, ensuring that `nginx` is installed and present on target systems.

=== Running Playbooks

To execute playbooks against managed hosts, run the `ansible-playbook` command followed by the playbook file name:

ansible-playbook -i inventory.ini playbook_name.yml

Ansible will connect to hosts as defined in the inventory, apply the tasks within the playbook, and report on the execution status.

=== Debugging Playbooks

When troubleshooting issues with your playbooks, use Ansible's `--check` mode or `debug` tasks to simulate changes without applying them:

ansible-playbook -i inventory.ini --check playbook_name.yml  # Check for idempotency

Or add `debug` tasks within your playbook to inspect variables and outputs:

---
- name: Debugging Example
  hosts: webservers
  become: no

  tasks:
  - name: Display variable values
    debug:
      var: some_variable

=== Conclusion

Mastering host management with Ansible is essential for efficient automation of system administration tasks. By understanding inventories, connection details, and playbook writing, you can effectively control and configure your infrastructure. Practice these concepts with hands-on labs to solidify your skills in managing hosts using Ansible.</code></pre>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="writing-simple-playbooks.html">Writing simple playbooks</a></span>
  <span class="next"><a href="using-ansible-modules.html">Using Ansible modules</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
